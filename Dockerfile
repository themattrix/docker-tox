FROM themattrix/tox-base

MAINTAINER Matthew Tardiff <mattrix@gmail.com>

ONBUILD COPY install-prereqs*.sh requirements*.txt setup.py tox.ini /app/
ONBUILD ARG SKIP_TOX=false
ONBUILD RUN bash -c " \
    if [ -f '/app/install-prereqs.sh' ]; then \
        bash /app/install-prereqs.sh; \
    fi && \
    if [ $SKIP_TOX == false ]; then \
        TOXBUILD=true tox; \
    fi"
